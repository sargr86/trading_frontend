<div id="stocks-list-holder">
    <div class="stocks-list" cdkDropList>
        <div class="stocks-top-actions">
            <div class="search-stocks">
                <!--                        <div class="watchlist-search" *ngIf="editUserStocks">-->
                <!--                            <app-search-stocks-form [autocomplete]="true" [whiteForm]="true" [returnFoundStock]="true"-->
                <!--                                                    (search)="getSearchResults($event)"></app-search-stocks-form>-->
                <!--                        </div>-->

                <div class="sort-types-dropdown dropdown">
                    <div class="dropdown-toggle" id="dropdown-menu-btn" data-toggle="dropdown">
                        Sort by <strong class="order-type">{{selectedSortType?.name}}</strong>
                    </div>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" *ngFor="let sortType of stocksSortTypes;let ind = index"
                           [class.red]="selectedSortType?.name === sortType.name"
                           (click)="sortStocks(sortType)">{{sortType.name}}</a>
                    </div>
                    <div class="spinner-container">
                        <!--                        <mat-spinner *ngIf="loader.stocksLoading.status === 'loading'"-->
                        <!--                                     [diameter]="15"></mat-spinner>-->
                    </div>
                </div>
            </div>
            <!--                    <div class="context-actions" *ngIf="editPortable">-->
            <!--                        <mat-icon [matMenuTriggerFor]="menu" *ngIf="!editUserStocks">more_horiz</mat-icon>-->
            <!--                        <mat-icon *ngIf="editUserStocks" (click)="editUserStocks = !editUserStocks">done</mat-icon>-->
            <!--                        <mat-menu #menu="matMenu">-->
            <!--                            <button mat-menu-item (click)="editUserStocks = !editUserStocks">-->
            <!--                                Edit Watchlist-->
            <!--                            </button>-->
            <!--                        </mat-menu>-->
            <!--                    </div>-->
        </div>
        <ng-container *ngFor="let stock of onlyFirst10Stocks(passedStocks)">
            <div class="stock-item" cdkDrag
                 (cdkDragDropped)="dragDropped($event)">
                <!--                <div class="remove-stock" *ngIf="editUserStocks" (click)="updateFollowedStocksList(stock)">-->
                <!--                    <i class="fas fa-trash"></i>-->
                <!--                </div>-->
                <div class="stock-details" (click)="openStockProfile(stock.symbol)">
                    <div class="stock-name-symbol">
                        <p class="stock-symbol">{{stock.symbol.replace('^', '')}}</p>
                        <p class="stock-name">{{stock.name}}</p>
                    </div>


                    <ng-container
                        [ngTemplateOutlet]="itemTemplate"
                        [ngTemplateOutletContext]="{details: getPercentageDetails(stock)}">
                    </ng-container>

                    <ng-template let-d="details" #itemTemplate>
                        <div class="indices-small-chart-container" *ngIf="stock.hasOwnProperty('series')">
                            <ngx-charts-line-chart [scheme]="getColorScheme(stock)" [animations]="false"
                                                   [results]="[stock]" [autoScale]="true"
                                                   [view]="stockChartSettings.view"
                                                   [tooltipDisabled]="stockChartSettings.tooltipDisabled"
                                                   [timeline]="true">
                            </ngx-charts-line-chart>
                        </div>
                        <div class="stock-price-change">
                            <p class="stock-price">{{stock.price?.toFixed(2)}}</p>
                            <p [ngClass]="d?.class" class="stock-change-details">
                                {{stock.change?.toFixed(2)}}({{d?.value?.toFixed(2)}}%)</p>
                        </div>
                    </ng-template>
                </div>
            </div>
        </ng-container>
    </div>

</div>
