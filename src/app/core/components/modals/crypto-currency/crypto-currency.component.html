<section class="crypto-section">

    <div class="favorites">
        <div class="top-wrap">
            <h2>My Watchlist</h2>
            <i class="fas fa-times" (click)="closeModal()"></i>
        </div>

        <div class="crypto-content">
            <div class="crypto-item" *ngFor="let stock of compareWithMainStockList(userStocks)"
                 [class.crypto-item-green]="stock.changesPercentage > 0">
                <div class="cryptoRemove">
                    <span class="material-icons" (click)="followStock(stock)">delete</span>
                </div>
                <p class="crypto-text-1">{{stock.name}}</p>
                <p class="crypto-text-2"><span class="crypto-text-abs">$</span>{{stock.price}}</p>
                <div class="crypto-block">
                    <p class="crypto-text-1">{{stock.change?.toFixed(2)}}</p>
                    <p class="crypto-text-1">{{stock.changesPercentage}}%</p>
                </div>
                <!--                <img class="crypto-map" src="assets/img/map.png">-->
            </div>
        </div>
    </div>


    <div class="all-stocks">
        <div class="top-wrap">
            <h2>All Stocks</h2>

            <div class="center-group">
                <mat-spinner [diameter]="20" *ngIf="stocksLoading"></mat-spinner>
                <app-search-stocks-form [modal]="true"
                                        *ngIf="stocks.length > 0 && !stocksLoading"></app-search-stocks-form>
                <mat-paginator *ngIf="stocks.length > 0 && !stocksLoading" (page)="handle($event)"
                               #paginator
                               [length]="stocks.length" [pageIndex]="pageIndex"
                               [pageSize]="pageSize" [hidePageSize]="true"
                               [pageSizeOptions]="[2,5,10,25,100]">
                </mat-paginator>
            </div>

            <select (change)="stockTypeChanged($event)">
                <option *ngFor="let type of stockTypes" [value]="type.value">{{type.name}}</option>
            </select>
        </div>

        <div class="crypto-content">
            <div class="crypto-item" *ngFor="let stock of filteredStocks"
                 [class.crypto-item-green]="stock.changesPercentage > 0">
                <div class="stock-follow">
                    <button (click)="followStock(stock)" *ngIf="!isStockFollowed(stock)">Follow</button>
                    <button (click)="followStock(stock)" *ngIf="isStockFollowed(stock)">Following</button>
                </div>
                <p class="crypto-text-1">{{stock.name}}</p>
                <p class="crypto-text-2"><span class="crypto-text-abs">$</span>{{stock.price}}</p>
                <div class="crypto-block">
                    <p class="crypto-text-1">{{stock.change?.toFixed(2)}}</p>
                    <p class="crypto-text-1">{{stock.changesPercentage}}%</p>
                </div>
                <!--                <img class="crypto-map" src="assets/img/map.png">-->
            </div>
        </div>


    </div>

</section>

