<form [formGroup]="startStreamingForm" id="start-streaming-form">
    <div class="start-live-video">

        <div id="video-name">
            <input formControlName="name" placeholder="Video name">
            <mat-error *ngIf="streamName.hasError('required') && isSubmitted">The stream name is required</mat-error>
        </div>

        <div id="video-tags">
            <mat-form-field class="example-chip-list">
                <mat-chip-list #tagList aria-label="Fruit selection" formControlName="tags">
                    <mat-chip *ngFor="let tag of tags" (removed)="remove(tag)">
                        {{tag}}
                        <mat-icon matChipRemove>cancel</mat-icon>
                    </mat-chip>
                    <input placeholder="Tags..." #chipsInput
                           [matChipInputFor]="tagList"
                           [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                           (matChipInputTokenEnd)="add($event)">
                </mat-chip-list>
                <mat-hint align="end">Please press 'Enter' after the tag name</mat-hint>

            </mat-form-field>
            <mat-error *ngIf="tags.length ===0 && isSubmitted">Please provide some tags describing your live video
            </mat-error>
        </div>

        <div id="video-categories">
            <select formControlName="category_id">
                <option selected [value]="''">Category</option>
                <option *ngFor="let category of videoCategories" [value]="category.id">{{category.name}}</option>
            </select>
            <mat-error *ngIf="streamCategory.hasError('required') && isSubmitted">The stream category is required
            </mat-error>
        </div>

        <div id="video-description">
            <textarea formControlName="description" placeholder="Video description"></textarea>
            <mat-error *ngIf="streamDesc.hasError('required') && isSubmitted">The stream description is required
            </mat-error>
        </div>

        <div id="privacy">
            <mat-icon>{{selectedPrivacy?.icon}}</mat-icon>
            <select formControlName="privacy" required (change)="changedPrivacy($event)">
                <option [value]="''">Select privacy</option>
                <option *ngFor="let privacy of privacyTypes" [value]="privacy.name">
                    <!--                                    <mat-icon>{{privacy.icon}}</mat-icon>-->
                    {{privacy.name}}
                </option>
            </select>
        </div>

        <!--        <div class="item">-->
        <!--            <div class="info">-->
        <!--                <mat-icon>{{selectedPrivacy?.icon}}</mat-icon>-->
        <!--                <mat-form-field style="width:88%;">-->
        <!--                    <mat-select formControlName="privacy" required-->
        <!--                                (selectionChange)="changedPrivacy($event)">-->
        <!--                        &lt;!&ndash;                                <mat-select-trigger>&ndash;&gt;-->
        <!--                        &lt;!&ndash;                                    <div class="selected-privacy">&ndash;&gt;-->
        <!--                        &lt;!&ndash;                                        <mat-icon>{{selectedPrivacy.icon}}</mat-icon>&ndash;&gt;-->
        <!--                        &lt;!&ndash;                                        <span>{{selectedPrivacy.name}}</span>&ndash;&gt;-->
        <!--                        &lt;!&ndash;                                    </div>&ndash;&gt;-->
        <!--                        &lt;!&ndash;                                </mat-select-trigger>&ndash;&gt;-->
        <!--                        <mat-option [value]="''">Select privacy</mat-option>-->
        <!--                        <mat-option *ngFor="let privacy of privacyTypes" [value]="privacy.name">-->
        <!--                            &lt;!&ndash;                                    <mat-icon>{{privacy.icon}}</mat-icon>&ndash;&gt;-->
        <!--                            {{privacy.name}}-->
        <!--                        </mat-option>-->
        <!--                    </mat-select>-->
        <!--                </mat-form-field>-->
        <!--            </div>-->
        <!--        </div>-->

        <div id="thumbnail">
            <ng-container *ngIf="!thumbnailUploaded">
                <label for="custom-thumbnail">
                    <span class="material-icons">backup</span>
                    Upload Thumbnail
                </label>
                <mat-spinner [diameter]="15" *ngIf="thumbnailUploading"></mat-spinner>
                <input type="file" id="custom-thumbnail" (change)="getThumbnailFile($event)">
                <mat-error *ngIf="startStreamingForm.get('thumbnail').hasError('required') && isSubmitted">
                    The thumbnail is required
                </mat-error>
            </ng-container>
            <div *ngIf="thumbnailUploaded" id="uploaded-thumbnail-container">
                <mat-icon (click)="removeUploadedThumbnail(thumbnailFile.name)" id="remove-thumbnail">clear
                </mat-icon>
                <img id="uploaded-thumbnail" src="{{apiUrl+'uploads/thumbnails/'+thumbnailFile.name}}">
            </div>
        </div>

        <div class="actions">
            <button class="btn btn-lg btn-success join-session-btn" type="button" (click)="submit()">
                Start live video
            </button>
        </div>
    </div>
</form>
