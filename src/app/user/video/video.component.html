<ng-container *ngIf="session">
    <div id="video-chat-container" *ngIf="openViduToken">
        <!--  <ng-container *ngFor="let sub of subscribers">-->
        <!--    <p>{{userNickname}}</p>-->
        <ng-container *ngIf="watcher">
            <!--      <app-vjs-player [options]="videoJSPlayerOptions"></app-vjs-player>-->
            <!--      <app-chat-box [openViduToken]="openViduToken" [session]="session"-->
            <!--                    (sendMessage)="sendMessage($event)"></app-chat-box>-->
            <ng-container *ngIf="recordingState != 'idle'">


                <!--      <app-video-js-record [openViduToken]="openViduToken" *ngIf="!watcher"></app-video-js-record>-->
                <div *ngFor="let sub of subscribers" class="stream-container col-md-6 col-xs-6">
                    <div class="video-container">
                        <app-user-video [streamManager]="sub"
                                        (click)="updateMainStreamManager(sub)"></app-user-video>
                    </div>
                </div>
                <app-chat-box [openViduToken]="openViduToken" [session]="session"
                              [videoRecordingState]="recordingState"
                              (sendMessage)="sendMessage($event)"></app-chat-box>
            </ng-container>

            <ng-container *ngIf="recordingState === 'idle'">

                <div id="streaming-not-started-yet">
                    <p>The video streaming session has not been started yet</p>
                </div>
                <app-chat-box [openViduToken]="openViduToken" [session]="session"
                              [videoRecordingState]="recordingState"
                              (sendMessage)="sendMessage($event)"></app-chat-box>
            </ng-container>
        </ng-container>
        <!--    <video #target class="video-js" controls muted playsinline preload="none"></video>-->
        <ng-container *ngIf="!watcher">
            <div class="video-container">
                <app-video-js-record [openViduToken]="openViduToken" [thumbnailFile]="thumbnailFile"
                                     [videoSettings]="videoSettings"></app-video-js-record>

            </div>
            <app-chat-box [openViduToken]="openViduToken" [session]="session"
                          (sendMessage)="sendMessage($event)" [videoRecordingState]="recordingState"></app-chat-box>
        </ng-container>
        <!--  </ng-container>-->
    </div>
</ng-container>

<div id="main-container" class="container" *ngIf="!session">
    <app-start-streaming-form *ngIf="!watcher" (formReady)="getPublisherData($event)"></app-start-streaming-form>
    <app-join-streaming-form *ngIf="watcher" (formReady)="getWatcherData($event)"></app-join-streaming-form>
</div>
