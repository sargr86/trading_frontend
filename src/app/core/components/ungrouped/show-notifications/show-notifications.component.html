<ul *mobxAutorun [class.sidebar-notifications]="shownInSidebar">
    <li *ngFor="let notification of notificationsStore.notifications" class="notification" [class.unread]="notification.read===0"
        [class.flex-wrap]="notification.notification_type.name === 'users_connection_request'"
        >

        <div class="left d-flex pl-2" (click)="readNotification(notification)">
            <div class="avatar-container">
                <img class="avatar" id="profile-image"
                     [src]="notification.from_user.avatar|getImgPath: 'user_avatars'">
            </div>
            <div class="notification-body">
                <p class="notification-text" [innerHTML]="notification.msg"></p>
                <span class="date"
                      [matTooltip]="notification.created_at|elegantDate">{{notification.created_at|dateFromNow}}</span>
            </div>
        </div>
        <div class="additional-actions">
            <div class="connection-actions" *ngIf="notification.notification_type.name === 'users_connection_request'">
                <button class="confirm-connection-btn" (click)="confirmConnection(notification)">
                    <mat-icon>check</mat-icon>
                    <span>Confirm</span>
                </button>
                <button class="decline-connection-btn" (click)="declineConnection(notification)">
                    <mat-icon>close</mat-icon>
                    <span>Decline</span>
                </button>
            </div>
            <div class="regular-notification-actions"
                 *ngIf="notification.notification_type.name !== 'users_connection_request'">
                <div class="dotes">
                    <button mat-icon-button [matMenuTriggerFor]="menu" [disableRipple]="true"
                            aria-label="Example icon-button with a menu">
                        <mat-icon>more_vert</mat-icon>
                    </button>
                    <mat-menu #menu="matMenu">
                        <button mat-menu-item (click)="readNotification(notification)">
                            <mat-icon>check</mat-icon>
                            <span>Mark as read</span>
                        </button>
                        <button mat-menu-item>
                            <mat-icon>close</mat-icon>
                            <span>Remove this notification</span>
                        </button>
                        <button mat-menu-item>
                            <mat-icon>cancel_presentation</mat-icon>
                            <span>Turn off notifications from this page</span>
                        </button>
                    </mat-menu>
                </div>
            </div>
        </div>
    </li>
</ul>

<p class="view-more-notifications" *ngIf="notificationsStore.notifications.length > 0 && shownInSidebar"
   (click)="router.navigate(['/notifications'])">View more</p>
